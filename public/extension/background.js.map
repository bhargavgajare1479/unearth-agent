{"version":3,"file":"background.js","mappings":"AAoCAA,OAAOC,QAAQC,UAAUC,YAAY,CAACC,EAASC,EAAQC,KACrD,GAAuB,mBAAnBF,EAAQG,OAIV,OAhCJC,eAA8BJ,EAASE,GACrC,IAIE,MAAMG,QAAYC,MAPQ,oCAOqB,CAC7CC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAUX,EAAQY,WAG/B,IAAKP,EAAIQ,GAAI,CACX,MAAMC,QAAkBT,EAAIU,OAC5B,MAAM,IAAIC,MAAM,wCAAwCX,EAAIY,iBAAiBH,IAC/E,CAGAZ,EAAa,CAAEgB,SAAS,EAAMC,cADRd,EAAIe,QAE5B,CAAE,MAAOC,GACPC,QAAQD,MAAM,iCAAkCA,GAChDnB,EAAa,CAAEgB,SAAS,EAAOG,MAAOA,EAAME,SAC9C,CACF,CAOIC,CAAexB,EAASE,IACjB,IAIXoB,QAAQG,IAAI","sources":["webpack://nextn/./src/extension/background.js"],"sourcesContent":["// This script acts as the extension's central nervous system.\r\n// It listens for messages from the content script and makes the call\r\n// to the same `analyzeInput` Server Action used by the main web application.\r\n\r\n// The URL to your deployed Next.js application's server action endpoint.\r\n// In a real deployment, this would be your production URL.\r\n// For local testing, we'll use the localhost address.\r\nconst ANALYSIS_ENDPOINT_URL = 'http://localhost:9002/api/analyze';\r\n\r\nasync function analyzeContent(request, sendResponse) {\r\n  try {\r\n    // The analyzeInput function is not directly accessible from the extension.\r\n    // We need to make a network request to an API route that we will create.\r\n    // This API route will, in turn, call the analyzeInput server action.\r\n    const res = await fetch(ANALYSIS_ENDPOINT_URL, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(request.payload),\r\n    });\r\n\r\n    if (!res.ok) {\r\n      const errorBody = await res.text();\r\n      throw new Error(`Analysis request failed with status: ${res.status}. Body: ${errorBody}`);\r\n    }\r\n\r\n    const results = await res.json();\r\n    sendResponse({ success: true, results });\r\n  } catch (error) {\r\n    console.error('Unearth Agent: Analysis failed', error);\r\n    sendResponse({ success: false, error: error.message });\r\n  }\r\n}\r\n\r\n// Listen for messages from the content script\r\nchrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\r\n  if (request.action === 'analyzeContent') {\r\n    // The analysis can be async, so we return true to indicate\r\n    // that we will call sendResponse later.\r\n    analyzeContent(request, sendResponse);\r\n    return true;\r\n  }\r\n});\r\n\r\nconsole.log('Unearth Agent background script loaded.');\r\n"],"names":["chrome","runtime","onMessage","addListener","request","sender","sendResponse","action","async","res","fetch","method","headers","body","JSON","stringify","payload","ok","errorBody","text","Error","status","success","results","json","error","console","message","analyzeContent","log"],"ignoreList":[],"sourceRoot":""}