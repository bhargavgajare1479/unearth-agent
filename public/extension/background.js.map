{"version":3,"file":"background.js","mappings":"AAmCAA,OAAOC,QAAQC,UAAUC,YAAY,CAACC,EAASC,EAAQC,KACrD,GAAuB,mBAAnBF,EAAQG,OAIV,OA/BJC,eAA8BJ,EAASE,GACrC,IAIE,MAAMG,QAAYC,MAAM,IAAIC,IAPF,eAO6BP,EAAQQ,QAAQC,KAAM,CAC3EC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAUd,EAAQe,WAG/B,IAAKV,EAAIW,GACP,MAAM,IAAIC,MAAM,wCAAwCZ,EAAIa,UAI9DhB,EAAa,CAAEiB,SAAS,EAAMC,cADRf,EAAIgB,QAE5B,CAAE,MAAOC,GACPC,QAAQD,MAAM,iCAAkCA,GAChDpB,EAAa,CAAEiB,SAAS,EAAOG,MAAOA,EAAME,SAC9C,CACF,CAOIC,CAAezB,EAASE,IACjB,IAIXqB,QAAQG,IAAI","sources":["webpack://nextn/./src/extension/background.js"],"sourcesContent":["// This script acts as the extension's central nervous system.\n// It listens for messages from the content script and makes the call\n// to the same `analyzeInput` Server Action used by the main web application.\n\n// The URL to your deployed Next.js application's server action endpoint.\n// In a real deployment, this would be your production URL.\n// For local testing, you might need to use something like http://localhost:9002 if your app runs there.\nconst ANALYSIS_ENDPOINT_URL = '/api/analyze'; // We'll use a relative URL which works if the extension is used on the same origin, but for cross-origin we'd need the full URL.\n\nasync function analyzeContent(request, sendResponse) {\n  try {\n    // The analyzeInput function is not directly accessible from the extension.\n    // We need to make a network request to an API route that we will create.\n    // This API route will, in turn, call the analyzeInput server action.\n    const res = await fetch(new URL(ANALYSIS_ENDPOINT_URL, request.origin).href, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(request.payload),\n    });\n\n    if (!res.ok) {\n      throw new Error(`Analysis request failed with status: ${res.status}`);\n    }\n\n    const results = await res.json();\n    sendResponse({ success: true, results });\n  } catch (error) {\n    console.error('Unearth Agent: Analysis failed', error);\n    sendResponse({ success: false, error: error.message });\n  }\n}\n\n// Listen for messages from the content script\nchrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n  if (request.action === 'analyzeContent') {\n    // The analysis can be async, so we return true to indicate\n    // that we will call sendResponse later.\n    analyzeContent(request, sendResponse);\n    return true;\n  }\n});\n\nconsole.log('Unearth Agent background script loaded.');\n"],"names":["chrome","runtime","onMessage","addListener","request","sender","sendResponse","action","async","res","fetch","URL","origin","href","method","headers","body","JSON","stringify","payload","ok","Error","status","success","results","json","error","console","message","analyzeContent","log"],"ignoreList":[],"sourceRoot":""}