{"version":3,"file":"content.js","mappings":"MAmEA,MAAMA,EA9DN,WACE,MAAMA,EAAQC,SAASC,cAAc,OACrCF,EAAMG,GAAK,sBACXH,EAAMI,MAAMC,QAAU,6aAoBtB,MAAMC,EAASL,SAASC,cAAc,OACtCI,EAAOF,MAAMC,QAAU,mLASvB,MAAME,EAAQN,SAASC,cAAc,MACrCK,EAAMC,YAAc,yBACpBD,EAAMH,MAAMK,OAAS,IACrBF,EAAMH,MAAMM,SAAW,OAEvB,MAAMC,EAAcV,SAASC,cAAc,UAC3CS,EAAYH,YAAc,IAC1BG,EAAYP,MAAMC,QAAU,oGAM5BM,EAAYC,QAAU,IAAOZ,EAAMI,MAAMS,QAAU,OAEnDP,EAAOQ,YAAYP,GACnBD,EAAOQ,YAAYH,GAEnB,MAAMI,EAAUd,SAASC,cAAc,OAQvC,OAPAa,EAAQZ,GAAK,8BACbY,EAAQX,MAAMY,UAAY,OAE1BhB,EAAMc,YAAYR,GAClBN,EAAMc,YAAYC,GAElBd,SAASgB,KAAKH,YAAYd,GACnBA,CACT,CAEckB,GACRC,EAAelB,SAASmB,eAAe,+BAO7C,SAASC,EAAYC,GACnB,IAAKA,EAAKC,QAER,YADAJ,EAAaK,UAAY,iCAAiCF,EAAKG,aAIjE,MAAMC,EAAUJ,EAAKI,QACfC,EAAQD,EAAQE,UAAUC,6BAA+B,MAC/D,IAAIC,EAAY,kCACZJ,EAAQK,cAAaD,EAAYJ,EAAQK,YAAYC,eACrDN,EAAQO,eAAcH,EAAYJ,EAAQO,aAAaD,eACvDN,EAAQQ,gBAAeJ,EAAYJ,EAAQQ,cAAcF,eAE7Db,EAAaK,UAAY,4LAInBG,EAAQ,GAAK,QAAUA,EAAQ,GAAK,SAAW,WAC3CA,6JAIgFG,uBAG5F,CAqDA,SAASK,IAEOlC,SAASmC,iBAAiB,WAElCC,QAAQC,IAEZ,GAAIA,EAAKC,cAAc,yBACrB,OAGF,MAAMC,EA3DV,SAA+BC,GAC7B,MAAMD,EAASvC,SAASC,cAAc,UA4CtC,OA3CAsC,EAAOE,UAAY,aACnBF,EAAOG,UAAY,uBACnBH,EAAOpC,MAAMC,QAAU,mNAWvBmC,EAAOI,YAAc,IAAOJ,EAAOpC,MAAMyC,QAAU,IACnDL,EAAOM,WAAa,IAAON,EAAOpC,MAAMyC,QAAU,MAElDL,EAAO5B,QAAUmC,UAnDjB/C,EAAMI,MAAMS,QAAU,OACtBM,EAAaK,UAAY,0EAoDvB,IAAIwB,EAAU,KAGd,MAAMC,EAAQR,EAAYF,cAAc,OAClCW,EAAQT,EAAYF,cAAc,SAClCY,EAAkBV,EAAYF,cAAc,6BAE9CU,GAASA,EAAMG,IAIfJ,EAAU,CAAEK,KAAM,MAAOtC,QAASkC,EAAMG,KACjCF,GAASA,EAAME,IACtBJ,EAAU,CAAEK,KAAM,MAAOtC,QAASmC,EAAME,KACjCD,GAAmBA,EAAgBT,YAC1CM,EAAU,CAAEK,KAAM,OAAQtC,QAASoC,EAAgBT,YAGnDM,EACFM,OAAOC,QAAQC,YAAY,CAAEC,OAAQ,iBAAkBT,UAASU,OAAQC,OAAOC,SAASF,QAAUrC,GAElGA,EAAY,CAAEE,SAAS,EAAOE,MAAO,oDAIlCe,CACT,CAamBqB,CAAsBvB,GACrCA,EAAKxB,YAAY0B,IAErB,CAGAL,IAEiB,IAAI2B,iBAAiB3B,GAC7B4B,QAAQ9D,SAASgB,KAAM,CAC9B+C,WAAW,EACXC,SAAS,IAGXC,QAAQC,IAAI,uC","sources":["webpack://nextn/./src/extension/content.js"],"sourcesContent":["// This script is injected into social media pages.\n// It will be responsible for finding posts and adding the \"Fact Check\" button.\n\n// --- UI & MODAL ---\n\nfunction createModal() {\n  const modal = document.createElement('div');\n  modal.id = 'unearth-agent-modal';\n  modal.style.cssText = `\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 99999;\n    background-color: white;\n    border: 1px solid #ccc;\n    border-radius: 8px;\n    padding: 20px;\n    width: 90%;\n    max-width: 500px;\n    box-shadow: 0 4px 12px rgba(0,0,0,0.2);\n    font-family: sans-serif;\n    color: #333;\n    display: none;\n    flex-direction: column;\n    max-height: 80vh;\n  `;\n\n  const header = document.createElement('div');\n  header.style.cssText = `\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px solid #eee;\n    padding-bottom: 10px;\n    margin-bottom: 15px;\n  `;\n\n  const title = document.createElement('h2');\n  title.textContent = 'Unearth Agent Analysis';\n  title.style.margin = '0';\n  title.style.fontSize = '18px';\n\n  const closeButton = document.createElement('button');\n  closeButton.textContent = 'Ã—';\n  closeButton.style.cssText = `\n    border: none;\n    background: transparent;\n    font-size: 24px;\n    cursor: pointer;\n  `;\n  closeButton.onclick = () => (modal.style.display = 'none');\n\n  header.appendChild(title);\n  header.appendChild(closeButton);\n\n  const content = document.createElement('div');\n  content.id = 'unearth-agent-modal-content';\n  content.style.overflowY = 'auto';\n\n  modal.appendChild(header);\n  modal.appendChild(content);\n\n  document.body.appendChild(modal);\n  return modal;\n}\n\nconst modal = createModal();\nconst modalContent = document.getElementById('unearth-agent-modal-content');\n\nfunction showLoading() {\n  modal.style.display = 'flex';\n  modalContent.innerHTML = `<p style=\"text-align: center;\">Analyzing... This may take a moment.</p>`;\n}\n\nfunction showResults(data) {\n  if (!data.success) {\n    modalContent.innerHTML = `<p style=\"color: red;\">Error: ${data.error}</p>`;\n    return;\n  }\n\n  const results = data.results;\n  const score = results.misScore?.misinformationImmunityScore ?? 'N/A';\n  let reasoning = 'No detailed analysis available.';\n  if (results.urlAnalysis) reasoning = results.urlAnalysis.riskReasoning;\n  if (results.textAnalysis) reasoning = results.textAnalysis.riskReasoning;\n  if (results.imageAnalysis) reasoning = results.imageAnalysis.riskReasoning;\n\n  modalContent.innerHTML = `\n    <div style=\"text-align: center;\">\n      <h3 style=\"margin-top: 0;\">Misinformation Immunity Score</h3>\n      <p style=\"font-size: 48px; font-weight: bold; margin: 10px 0; color: ${\n        score > 75 ? 'green' : score > 40 ? 'orange' : 'red'\n      };\">${score}</p>\n    </div>\n    <div>\n      <h4>Analysis Summary:</h4>\n      <p style=\"background: #f5f5f5; padding: 10px; border-radius: 4px; font-size: 14px;\">${reasoning}</p>\n    </div>\n  `;\n}\n\n// --- LOGIC ---\n\nfunction createFactCheckButton(postElement) {\n  const button = document.createElement('button');\n  button.innerText = 'Fact Check';\n  button.className = 'unearth-agent-button'; // Add a class for styling and to avoid re-adding\n  button.style.cssText = `\n    background-color: #2a4d3e;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    padding: 6px 12px;\n    font-size: 12px;\n    cursor: pointer;\n    margin-top: 8px;\n    opacity: 0.8;\n  `;\n  button.onmouseover = () => (button.style.opacity = '1');\n  button.onmouseout = () => (button.style.opacity = '0.8');\n\n  button.onclick = async () => {\n    showLoading();\n    let payload = null;\n\n    // Try to find different types of content within the post\n    const image = postElement.querySelector('img');\n    const video = postElement.querySelector('video');\n    const postTextElement = postElement.querySelector('[data-testid=\"tweetText\"]'); // Twitter/X specific\n\n    if (image && image.src) {\n        // We can't analyze external images directly due to CORS.\n        // The background script would need to fetch them.\n        // For now, we will treat it like a URL analysis of the image source.\n        payload = { type: 'url', content: image.src };\n    } else if (video && video.src) {\n        payload = { type: 'url', content: video.src };\n    } else if (postTextElement && postTextElement.innerText) {\n        payload = { type: 'text', content: postTextElement.innerText };\n    }\n\n    if (payload) {\n      chrome.runtime.sendMessage({ action: 'analyzeContent', payload, origin: window.location.origin }, showResults);\n    } else {\n      showResults({ success: false, error: \"Couldn't find analyzable content in this post.\" });\n    }\n  };\n\n  return button;\n}\n\n// Function to find and add buttons to posts\nfunction addButtonsToPosts() {\n  // Use a selector that works for Twitter/X articles\n  const posts = document.querySelectorAll('article');\n\n  posts.forEach(post => {\n    // Check if we've already added a button to this post\n    if (post.querySelector('.unearth-agent-button')) {\n      return;\n    }\n\n    const button = createFactCheckButton(post);\n    post.appendChild(button);\n  });\n}\n\n// Run the function initially and then use a MutationObserver to watch for new posts being added to the page\naddButtonsToPosts();\n\nconst observer = new MutationObserver(addButtonsToPosts);\nobserver.observe(document.body, {\n  childList: true,\n  subtree: true,\n});\n\nconsole.log('Unearth Agent content script loaded.');\n"],"names":["modal","document","createElement","id","style","cssText","header","title","textContent","margin","fontSize","closeButton","onclick","display","appendChild","content","overflowY","body","createModal","modalContent","getElementById","showResults","data","success","innerHTML","error","results","score","misScore","misinformationImmunityScore","reasoning","urlAnalysis","riskReasoning","textAnalysis","imageAnalysis","addButtonsToPosts","querySelectorAll","forEach","post","querySelector","button","postElement","innerText","className","onmouseover","opacity","onmouseout","async","payload","image","video","postTextElement","src","type","chrome","runtime","sendMessage","action","origin","window","location","createFactCheckButton","MutationObserver","observe","childList","subtree","console","log"],"ignoreList":[],"sourceRoot":""}